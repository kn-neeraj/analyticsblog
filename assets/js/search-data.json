{
  
    
        "post0": {
            "title": "Churn Analysis",
            "content": "Introduction . I am sure you have heard the phrase - retention is the key! Indeed, strong retention of users over time is a great indicator of product-market fit, something all start-ups intend to achieve. . To improve retention, it is imperative to understand leading indicators of churn and then improve the product accordingly. . So in this post, we look at a fictious SaaS company‚Äôs 3 months data (generated randomly) to understand how to do churn analysis. . Objective . Our objective is to suggest product changes needed to reduce churn . Conceptual Overview . In subscription businesses retention is the most important metric. Churn is like a hole in the boat, no matter how many customers a start-up acquires, it will not thrive without sticky features that retain users. . As a Product Manager, it is important to look deeper and analyse big numbers with scrutiny. . There are two kinds of churn - . 1) Customer Churn ‚Äì Defined simply as number of customers churned compared to total number of customers. Focus is on retaining high percentage of customers for a longer period . 2) Revenue Churn ‚Äì Defined as revenue churned compared to overall revenue. It is a measure of lost revenue. It is critical to understand why this metric is important compared to customer churn. Not all customers are equal so if a start-up is losing high value customers the impact on revenue churn will be much higher than if it is losing low value customers . In this post, we will look at the following metrics for TakeZero (our fictitious company) ‚Äì . Monthly churn rate ‚Äì This is a basic month-on-month (MOM) customer churn. . | Churn rates by customer segmentation ‚Äì Churn rates are reported with some customer segmentation. For instance, customers from different acquisition channels, region, subscription plan lead to different churn rates. Therefore, it is critical to understand what kind of customers have high churn rates . | . Churn rates by customer behaviour ‚Äì A user takes a series of steps after subscribing. It is important to find features which are sticky and drive retention in short term and long term. Drive usage of that feature to other customers as well . | Cohort Analysis ‚Äì Cohorts are group of users sharing a common characteristic such as acquired in same month, acquisition channel etc. Over time as the product is getting improved, one needs to ensure that younger cohorts are showing better retention . | Churn Prediction ‚Äì Once we identify predictor variables which are significant to predict churn, we can use any of Machine Learning techniques such as Logistic Regression, Decision Tree to predict customer churn . | . Note: This post will focus on analysing customer churn and not revenue churn (we will do that in another post) . Company Details &amp; Data . TakeZero is a fictitious SaaS company (like no-code platforms) which allows teams to collaborate and build basic no code web and mobile apps through its web application. We have data points for Q4 2019 i.e. October, November, December. Data and description of all the columns can be found here - . File - https://drive.google.com/file/d/1okQlxFfRKLR8Sakk0QjNtqA8frGCqZH2/view?usp=sharing . ## . Data Overview . Here is a snapshot of the first 2 rows of the data ‚Äì . ID Purchase month purchase plan - # of seats Team members added Customer Region avg number of web app sessions ran per month avg number of mobile app sessions ran per month Month churned . 1 | October | 2 | 2 | US | 30 | 16 | ¬† | . 2 | October | 10 | 4 | US | 68 | 12 | November | . Column descriptions are the following - . Column Name Column Description . ID | Serial number of the customer | . Purchase month | Month in which subscription plan was purchased, we have 3 months data: October, November, and December | . Purchase plan - # of seats | Customers can buy individual plan (1 seat) or team plans ( 2, 5 or 10 seats). Seats refer to maximum number of users that can be onboarded on the platform by the user | . Team members added | Actual number of users added by the customer (capped to the number of seats in the bought subscription plan) | . Web app sessions per month | Avg. number of monthly sessions building no code web apps by the customer | . Mobile app sessions per month | Avg. number of monthly sessions building no code mobile by the customer | . Customer Region | Continent to which the customer belongs. | . Month churned | Month in which customer cancelled his plan. If empty, it means user did not churn. Churn data is available for November, December, &amp; January | . Implementation . Monthly Churn Rate - Total customers churned in that period / Avg. number of customers in that period . ¬† new customers start of month churn end of month avg. number of customers Monthly churn rate . October | 300 | 0 | 0 | 300 | ¬† | ¬† | . November | 401 | 701 | 60 | 641 | 671 | 2% | . December | 499 | 1140 | 130 | 1010 | 1075 | 3% | . January | 0 | 1010 | 170 | 840 | 925 | 5% | . According to calculations, our monthly churn rate is around 2-3% which is on the much lower end of avg. churn rates in early stage SaaS companies. . Churn rates by user segment . We have two data points on customer segmentation ‚Äì region to which they belong, and purchase plan (# of seats they purchase). Let us look at churn rates by region and purchase plan to see if some kind customer segment is churning. . Churn rate by region ‚Äì Observations, . 69% of customers from Asia churn within 3 months. This is much higher than 16-18% churn of European and US customers in the same time period. | . Region New customers Churned Churn% . Asia | 284 | 197 | 69% | . Europe | 334 | 55 | 16% | . US | 582 | 108 | 19% | . Grand Total | 1200 | 360 | 30% | . Churn rate by purchase plan ‚Äì 2 important observations here, . Customers who buy individual plans (1 seat) churn at much higher rate (47%) than customers who buy team plans (avg around 22-23%) . | Customers who buy team plans and add less than 60% of the team members in 1st 3 months churn at a much higher rate. For example, 100% of the customers who bought 10 seat plan but added less than 5 members, churned within first 3 months . | . Purchase Plan-# of seats bought # of team members added # of customers added Churn Churn% . 1 | 1 | 358 | 169 | 47% | . ¬† | Total | 358 | 169 | 47% | . 2 | 1 | 57 | 50 | 88% | . ¬† | 2 | 222 | 11 | 5% | . ¬† | Total | 279 | 61 | 22% | . 5 | 1 | 18 | 17 | 94% | . ¬† | 2 | 34 | 34 | 100% | . ¬† | 3 | 7 | 0 | 0% | . ¬† | 4 | 96 | 5 | 5% | . ¬† | 5 | 120 | 7 | 6% | . ¬† | Total | 275 | 63 | 23% | . 10 | 1 | 2 | 2 | 100% | . ¬† | 2 | 16 | 16 | 100% | . ¬† | 3 | 22 | 22 | 100% | . ¬† | 4 | 20 | 20 | 100% | . ¬† | 7 | 59 | 1 | 2% | . ¬† | 8 | 53 | 2 | 4% | . ¬† | 9 | 63 | 1 | 2% | . ¬† | 10 | 53 | 3 | 6% | . ¬† | Total | 288 | 67 | 23% | . Churn rates by customer behaviour . Churn rates by team members added . Churn rates by avg number of web app development sessions per month ‚Äì Observations, . We know on an avg how many web app development sessions user does per month. We will normalize this metric to remove the effect of the number of seats team plan has i.e. avg number of web app development sessions per month per added user . | We don‚Äôt see much difference in the web app dev sessions done per month between churned and retained user. Therefore, there is no significant association between this metric and churn . | . Churn avg web app dev sessions ran per month per added user . 0 | 10.21071429 | . 1 | 9.913888889 | . Grand Total | 10.12166667 | . Churn rates by avg number of web app development sessions per month ‚Äì Observations, . We know on an avg how many mobile app development sessions user does per month. We will normalize this metric to remove the effect of the number of seats team plan has i.e. avg number of mobile app development sessions per month per added user . | We see a big difference between averages of churn and retained users. It seems retained users are doing much more mobile app dev sessions per month than churned out users. It shows how mobile app dev on the TakeZero platform is a sticky feature for short term retention (This is an important insight!!) . | . Churn avg mobile app dev sessions ran per month per added user . 0 | 8.997619048 | . 1 | 3.083333333 | . Grand Total | 7.223333333 | . Cohort Analysis . Cohort are groups of users sharing by a common characteristic. For instance, cohorts by acquisition date, daily, weekly, monthly cohorts etc . | Once can compare metrics such as engagement, retention, or conversion across cohorts . | Through cohort analysis, we want to understand if our product changes, campaigns or other investments are leading to positive retention among younger cohorts . | . For improving retention, there are two broadly types of cohorts . Acquisition Cohorts - Group user by their acquisition day, week or month and measure retention. This helps to understand when we are losing customers and when does churn stablise . | Behavioural Cohorts ‚Äì Group users by specific behaviours they have or haven‚Äôt take on the product within a given timeframe. (For example ‚Äì inviting a team member in 1st month, Following 5 users in 1st week etc). Then we can track retention across such cohorts and find out which are sticky features or which features lead to +ve retention . | . [CHART]Acquisition Cohorts . % of customers retained in lifetime month ¬† ¬† ¬† ¬† . ¬† | 0 | 1 | 2 | 3 | . October | 100% | 80% | 77% | 75% | . November | 100% | 70% | 67% | ¬† | . December | 100% | 69% | ¬† | ¬† | . Avg | 100% | 73% | 72% | 75% | . Observations, . If we look at cohorts of users acquired in month October, Nov, December ‚Äì we can understand that we lose majority of customers in 1st month and churn stabilises around 2nd-3rd month. | . Behavioural Cohorts . [CHART]Based on what we saw in ‚ÄúChurn rate by Customer Behaviour‚Äù section, we can form two hypotheses . Hypothesis 1: We believe team plan subscribers who fill more than 60% of the bought seats within first 3 months retain better . Around 20% of the customers who fill &lt; 60% of the bought seats in team plan churn within 1st month. Whereas, 0% churn in customers who fill &gt; 60% seats bought in team plan . | Therefore, it is essential to improve team member invitation feature to ensure customers add more team members and fill as many seats bought in first month after onboarding . | . [CHART]Hypothesis 2: We believe customers who do more mobile app dev sessions per month per user retain better . Around 25% of the customers whose team does &lt; 5 mobile app dev sessions per month per user churn within 1st month. Whereas, 0% churn in customers whose team does more than 5 mobile app dev sessions per month per user . | Therefore, mobile app dev seems to be a sticky feature for short term retention. Therefore, it is important to improve its discovery, usage, flow to ensure 100% of the customers start using this feature in 1st month after acquisition . | .",
            "url": "https://kn-neeraj.github.io/analyticsblog/2020/04/20/Churn-Analysis.html",
            "relUrl": "/2020/04/20/Churn-Analysis.html",
            "date": " ‚Ä¢ Apr 20, 2020"
        }
        
    
  
    
        ,"post1": {
            "title": "Building a basic search engine from scratch using Python, Sklearn, and Networkx",
            "content": "Introduction . In the grad school classes (Machine Learning for Business Managers, Network Analytics, Fintech, Data Driven Customer Management) I took in my last few terms at B-school, I was introduced to Network Analytics and Google search algorithm in more detail.Search seemed like a perfect match of network analytics concepts like pagerank, eigenvector metrics and basic NLP algorithms I learned in the classes. Hence, in this post I implement a basic search engine using metrics such as eigenvector and TF-IDF. We use following Python libraries - Pandas, Sklearn, Networkx. . Data Source . We will implement search to find relevant TED talks based on user query. We will use data available on Kaggle - https://www.kaggle.com/rounakbanik/ted-talks. . It contains information about all audio-video recordings of TED Talks uploaded to the official TED.com website until September 21st, 2017. There are two CSV files . ted_main.csv - Contains data such as talk title, speaker, related talks | transcripts.csv - Contains data such as talk transcripts and url | Ideally, our implemented search engine should give results similar to TED website search. . Conceptual Overview . To provide search results, search engines like Google, Bing look at 3 distinct sources of information- . Network Popularity: Citiation Model - Google uses networks metrics such as pagerank (a variant of Eigenvector centrality network metric) which can be considered as the importance score of a web page. Web search engines use a crawler to create a network of web pages with hyperlinks b/w web pages as edges of the network. A web page (or network node) with high pagerank (or eigenvector centrality) is linked to other important network nodes. PageRank is defined recursively and depends on the number and PageRank metric of all pages that link to it (&quot;incoming links&quot;). A page that is linked to by many pages with high PageRank receives a high rank itself. | . As visible in the following image, node C despite having ony 1 incoming hyperlink has high page rank as the source of that hyperlink is B, which is a node with high page rank itself. For more mathematical introduction to pagerank, check - Pagerank implementation . . Content Relevance:Vector Model- Here the search engine looks at the relevance of content of the web page with search keywords. In information retrieval, Term Frequency-Inverse Document Frequency (TF-IDF) metric reflects how important a word is to a document/web page. Term Frequency is number of times a term appears in a doc | Inverse Document Frequency is # of documents / # of documents containing the term. This metric makes sure that frequent terms like a,an,the,end etc which don&#39;t carry much information have less IDF value. | TF-IDF is just multiplication of the both - TF * IDF | . | . After removing stop words (&#39;a&#39;,&#39;the&#39;,&#39;and&#39;, etc), TF-IDF metric is calculated for all the terms in a document. The document having highest TF-IDF metric for the search keywords receives a high rank and surfaces to the top. For more understanding and implementation check this blog on TowardsDataScience. . . Usage or Behavioral Model - Here the search engine looks at the behavioral popularity score of the page which accounts for following metrics Number of visitors to the page | Amt. of time spent on the page | Penalty for quick click to another link in search result page and more... | . | . Note: Currently, we have limited behavioral or usage data of the TED videos except comments. Hence, we will not be taking into account behavioral model in our current implementation. . Implementation . To implement search for TED videos we will do the following - . Preprocess the raw csv files | Calculate eigenvector-centrality metric (a variant of pagerank metric) by creating a directed graph of TED talks. Each node in the graph represents a TED talk and directed edge represents that the destination TED video is mentioned in the &quot;related talks&quot; of source TED video. We use Networkx library for this | Calculate TF-IDF metric for each term in TED video transcript using TFIDFVectorizer of Sklearn library | Based on search query, we calculate the matching score for every TED video which is the sum of TF-IDF values of all the terms | Finally, we create a composite score for every TED video by taking into account both Eigenvector and Matching Score. | Sort and show top 5 TED videos based on the composite score | Imports . We use following libraries . Networkx : https://networkx.github.io/documentation/stable/ | Pandas : https://pandas-docs.github.io/pandas-docs-travis/install.html | Sklearn : https://scikit-learn.org/stable/ | . #collapse-show import networkx as nx import pandas as pd import os import json import ast import matplotlib.pyplot as plt from sklearn.feature_extraction.text import TfidfVectorizer import numpy as np from IPython.display import Image from IPython.core.display import HTML pd.set_option(&#39;display.max_colwidth&#39;,1000) import emoji . . Data processing . We load csv files, merge them and create a single dataframe | As visible in the output below, final dataframe contains columns - title, transcript, url, and related talks | There are 2467 TED talks | . #collapse-show path_to_data = os.getcwd() + &quot; data &quot; ted_main_filepath = path_to_data + &quot;ted_main.csv&quot; transcripts_filepath = path_to_data + &quot;transcripts.csv&quot; ted_main_df = pd.read_csv(ted_main_filepath) ted_main_df = ted_main_df[[&#39;title&#39;, &#39;url&#39;, &#39;related_talks&#39;]] transcripts_df = pd.read_csv(transcripts_filepath) #merge the two dataframes to create one. final_ted_df = transcripts_df.merge(ted_main_df, on=&quot;url&quot;) final_ted_df = final_ted_df[[&#39;title&#39;, &#39;url&#39;, &#39;transcript&#39;, &#39;related_talks&#39;]] print(&quot;We have data on {} talks. Notice the title, url, transcript, and related_talks columns below:&quot;.format(final_ted_df.shape[0])) final_ted_df.head(2) . . We have data on 2467 talks. Notice the title, url, transcrip, and related_talks columns below: . title url transcript related_talks . 0 | Do schools kill creativity? | https://www.ted.com/talks/ken_robinson_says_schools_kill_creativity n | Good morning. How are you?(Laughter)It&#39;s been great, hasn&#39;t it? I&#39;ve been blown away by the whole thing. In fact, I&#39;m leaving.(Laughter)There have been three themes running through the conference which are relevant to what I want to talk about. One is the extraordinary evidence of human creativity in all of the presentations that we&#39;ve had and in all of the people here. Just the variety of it and the range of it. The second is that it&#39;s put us in a place where we have no idea what&#39;s going to happen, in terms of the future. No idea how this may play out.I have an interest in education. Actually, what I find is everybody has an interest in education. Don&#39;t you? I find this very interesting. If you&#39;re at a dinner party, and you say you work in education ‚Äî Actually, you&#39;re not often at dinner parties, frankly.(Laughter)If you work in education, you&#39;re not asked.(Laughter)And you&#39;re never asked back, curiously. That&#39;s strange to me. But if you are, and you say to somebody, you know, the... | [{&#39;id&#39;: 865, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/172559_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Ken Robinson&#39;, &#39;title&#39;: &#39;Bring on the learning revolution!&#39;, &#39;duration&#39;: 1008, &#39;slug&#39;: &#39;sir_ken_robinson_bring_on_the_revolution&#39;, &#39;viewed_count&#39;: 7266103}, {&#39;id&#39;: 1738, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/de98b161ad1434910ff4b56c89de71af04b8b873_1600x1200.jpg&#39;, &#39;speaker&#39;: &#39;Ken Robinson&#39;, &#39;title&#39;: &quot;How to escape education&#39;s death valley&quot;, &#39;duration&#39;: 1151, &#39;slug&#39;: &#39;ken_robinson_how_to_escape_education_s_death_valley&#39;, &#39;viewed_count&#39;: 6657572}, {&#39;id&#39;: 2276, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/3821f3728e0b755c7b9aea2e69cc093eca41abe1_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Linda Cliatt-Wayman&#39;, &#39;title&#39;: &#39;How to fix a broken school? Lead fearlessly, love hard&#39;, &#39;duration&#39;: 1027, &#39;slug&#39;: &#39;linda_cliatt_wayman_how_to_fix_a_broken_school_lead_fearlessly_love_hard&#39;, &#39;viewed_count&#39;: 1617101}, {&#39;id&#39;: 892, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/e79958940573cc610ccb583619a54866c41ef303_2880x1620.jpg&#39;, &#39;s... | . 1 | Averting the climate crisis | https://www.ted.com/talks/al_gore_on_averting_climate_crisis n | Thank you so much, Chris. And it&#39;s truly a great honor to have the opportunity to come to this stage twice; I&#39;m extremely grateful. I have been blown away by this conference, and I want to thank all of you for the many nice comments about what I had to say the other night. And I say that sincerely, partly because (Mock sob) I need that.(Laughter)Put yourselves in my position.(Laughter)I flew on Air Force Two for eight years.(Laughter)Now I have to take off my shoes or boots to get on an airplane!(Laughter)(Applause)I&#39;ll tell you one quick story to illustrate what that&#39;s been like for me.(Laughter)It&#39;s a true story ‚Äî every bit of this is true.Soon after Tipper and I left the ‚Äî (Mock sob) White House ‚Äî(Laughter)we were driving from our home in Nashville to a little farm we have 50 miles east of Nashville. Driving ourselves.(Laughter)I know it sounds like a little thing to you, but ‚Äî(Laughter)I looked in the rear-view mirror and all of a sudden it just hit me. There was no motorcade b... | [{&#39;id&#39;: 243, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/566c14767bd62c5ff760e483c5b16cd2753328cd_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Al Gore&#39;, &#39;title&#39;: &#39;New thinking on the climate crisis&#39;, &#39;duration&#39;: 1674, &#39;slug&#39;: &#39;al_gore_s_new_thinking_on_the_climate_crisis&#39;, &#39;viewed_count&#39;: 1751408}, {&#39;id&#39;: 547, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/89288_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Ray Anderson&#39;, &#39;title&#39;: &#39;The business logic of sustainability&#39;, &#39;duration&#39;: 954, &#39;slug&#39;: &#39;ray_anderson_on_the_business_logic_of_sustainability&#39;, &#39;viewed_count&#39;: 881833}, {&#39;id&#39;: 2093, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/146d88845861cbf768bbf8bec8b2e41f8bfc7903_2400x1800.jpg&#39;, &#39;speaker&#39;: &#39;Lord Nicholas Stern&#39;, &#39;title&#39;: &#39;The state of the climate ‚Äî and what we might do about it&#39;, &#39;duration&#39;: 993, &#39;slug&#39;: &#39;lord_nicholas_stern_the_state_of_the_climate_and_what_we_might_do_about_it&#39;, &#39;viewed_count&#39;: 773779}, {&#39;id&#39;: 2784, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/e835e670a7836cf65aca2a7a644fd94398cb4b8e_2880x1620.jpg&#39;, &#39;spe... | . Calculating eigenvector value for each ted talk . First, we need to create a directed graph where a node is a TED talk and an edge is - (source ted talk -&gt; related ted talk). To create the graph we need a dataframe where each row represents an edge | Then we get eigenvector values using networkx library function | . #collapse-show #Create edges dataframe which will be used to create directed graph recommendations_df = final_ted_df[[&quot;title&quot;,&quot;related_talks&quot;]] def recommended_titles_list(reco_str): data = json.dumps(ast.literal_eval(reco_str)) jdata = json.loads(data) titles_list = [] for data in jdata: titles_list.append(data[&#39;title&#39;]) return titles_list columns = [&#39;title&#39;, &#39;related_title&#39;] edges_df = pd.DataFrame(columns=columns) for index, row in recommendations_df.iterrows(): title = row[&#39;title&#39;] reco_list = recommended_titles_list(row[&#39;related_talks&#39;]) for reco_title in reco_list: edges_df = edges_df.append({&#39;title&#39;:title, &#39;related_title&#39;:reco_title}, ignore_index=True) print(&quot;In following dataframe each row represents an edge with total of {} edges:&quot;.format(edges_df.shape[0])) edges_df.head(5) . . In following dataframe each row represents an edge with total of 14802 edges: . title related_title . 0 | Do schools kill creativity? | Bring on the learning revolution! | . 1 | Do schools kill creativity? | How to escape education&#39;s death valley | . 2 | Do schools kill creativity? | How to fix a broken school? Lead fearlessly, love hard | . 3 | Do schools kill creativity? | Education innovation in the slums | . 4 | Do schools kill creativity? | A short intro to the Studio School | . #collapse-show # Create the directed graph from edges dataframe using networkx di_reco_graph = nx.from_pandas_edgelist(edges_df,&#39;title&#39;,&#39;related_title&#39;, create_using=nx.DiGraph()) # Calculate normalized eigenvector for nodes eigenvector_dict = nx.eigenvector_centrality(di_reco_graph) # normalize the eigenvectors factor=1.0/sum(eigenvector_dict.values()) normalised_eigenvector_dict = {k: v*factor for k, v in eigenvector_dict.items() } # Add the eigen vector values for each ted talk to the main dataframe eigenvectors_df = pd.DataFrame(normalised_eigenvector_dict.items(), columns=[&#39;title&#39;, &#39;eigenvector_value&#39;]) final_ted_df = final_ted_df.merge(eigenvectors_df,on=[&quot;title&quot;]) print(nx.info(di_reco_graph)) print(&quot;Notice the last column having eigen_vector values for each TED talk : &quot;) final_ted_df.head(5) . . Name: Type: DiGraph Number of nodes: 2520 Number of edges: 14784 Average in degree: 5.8667 Average out degree: 5.8667 Notice the last column having eigen_vector values for each TED talk : . title url transcript related_talks eigenvector_value . 0 | Do schools kill creativity? | https://www.ted.com/talks/ken_robinson_says_schools_kill_creativity n | Good morning. How are you?(Laughter)It&#39;s been great, hasn&#39;t it? I&#39;ve been blown away by the whole thing. In fact, I&#39;m leaving.(Laughter)There have been three themes running through the conference which are relevant to what I want to talk about. One is the extraordinary evidence of human creativity in all of the presentations that we&#39;ve had and in all of the people here. Just the variety of it and the range of it. The second is that it&#39;s put us in a place where we have no idea what&#39;s going to happen, in terms of the future. No idea how this may play out.I have an interest in education. Actually, what I find is everybody has an interest in education. Don&#39;t you? I find this very interesting. If you&#39;re at a dinner party, and you say you work in education ‚Äî Actually, you&#39;re not often at dinner parties, frankly.(Laughter)If you work in education, you&#39;re not asked.(Laughter)And you&#39;re never asked back, curiously. That&#39;s strange to me. But if you are, and you say to somebody, you know, the... | [{&#39;id&#39;: 865, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/172559_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Ken Robinson&#39;, &#39;title&#39;: &#39;Bring on the learning revolution!&#39;, &#39;duration&#39;: 1008, &#39;slug&#39;: &#39;sir_ken_robinson_bring_on_the_revolution&#39;, &#39;viewed_count&#39;: 7266103}, {&#39;id&#39;: 1738, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/de98b161ad1434910ff4b56c89de71af04b8b873_1600x1200.jpg&#39;, &#39;speaker&#39;: &#39;Ken Robinson&#39;, &#39;title&#39;: &quot;How to escape education&#39;s death valley&quot;, &#39;duration&#39;: 1151, &#39;slug&#39;: &#39;ken_robinson_how_to_escape_education_s_death_valley&#39;, &#39;viewed_count&#39;: 6657572}, {&#39;id&#39;: 2276, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/3821f3728e0b755c7b9aea2e69cc093eca41abe1_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Linda Cliatt-Wayman&#39;, &#39;title&#39;: &#39;How to fix a broken school? Lead fearlessly, love hard&#39;, &#39;duration&#39;: 1027, &#39;slug&#39;: &#39;linda_cliatt_wayman_how_to_fix_a_broken_school_lead_fearlessly_love_hard&#39;, &#39;viewed_count&#39;: 1617101}, {&#39;id&#39;: 892, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/e79958940573cc610ccb583619a54866c41ef303_2880x1620.jpg&#39;, &#39;s... | 0.003404 | . 1 | Averting the climate crisis | https://www.ted.com/talks/al_gore_on_averting_climate_crisis n | Thank you so much, Chris. And it&#39;s truly a great honor to have the opportunity to come to this stage twice; I&#39;m extremely grateful. I have been blown away by this conference, and I want to thank all of you for the many nice comments about what I had to say the other night. And I say that sincerely, partly because (Mock sob) I need that.(Laughter)Put yourselves in my position.(Laughter)I flew on Air Force Two for eight years.(Laughter)Now I have to take off my shoes or boots to get on an airplane!(Laughter)(Applause)I&#39;ll tell you one quick story to illustrate what that&#39;s been like for me.(Laughter)It&#39;s a true story ‚Äî every bit of this is true.Soon after Tipper and I left the ‚Äî (Mock sob) White House ‚Äî(Laughter)we were driving from our home in Nashville to a little farm we have 50 miles east of Nashville. Driving ourselves.(Laughter)I know it sounds like a little thing to you, but ‚Äî(Laughter)I looked in the rear-view mirror and all of a sudden it just hit me. There was no motorcade b... | [{&#39;id&#39;: 243, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/566c14767bd62c5ff760e483c5b16cd2753328cd_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Al Gore&#39;, &#39;title&#39;: &#39;New thinking on the climate crisis&#39;, &#39;duration&#39;: 1674, &#39;slug&#39;: &#39;al_gore_s_new_thinking_on_the_climate_crisis&#39;, &#39;viewed_count&#39;: 1751408}, {&#39;id&#39;: 547, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/89288_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Ray Anderson&#39;, &#39;title&#39;: &#39;The business logic of sustainability&#39;, &#39;duration&#39;: 954, &#39;slug&#39;: &#39;ray_anderson_on_the_business_logic_of_sustainability&#39;, &#39;viewed_count&#39;: 881833}, {&#39;id&#39;: 2093, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/146d88845861cbf768bbf8bec8b2e41f8bfc7903_2400x1800.jpg&#39;, &#39;speaker&#39;: &#39;Lord Nicholas Stern&#39;, &#39;title&#39;: &#39;The state of the climate ‚Äî and what we might do about it&#39;, &#39;duration&#39;: 993, &#39;slug&#39;: &#39;lord_nicholas_stern_the_state_of_the_climate_and_what_we_might_do_about_it&#39;, &#39;viewed_count&#39;: 773779}, {&#39;id&#39;: 2784, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/e835e670a7836cf65aca2a7a644fd94398cb4b8e_2880x1620.jpg&#39;, &#39;spe... | 0.001041 | . 2 | Simplicity sells | https://www.ted.com/talks/david_pogue_says_simplicity_sells n | (Music: &quot;The Sound of Silence,&quot; Simon &amp; Garfunkel)Hello voice mail, my old friend.(Laughter)I&#39;ve called for tech support again. I ignored my boss&#39;s warning. I called on a Monday morning. Now it&#39;s evening, and my dinner first grew cold, and then grew mold. I&#39;m still on hold. I&#39;m listening to the sounds of silence. I don&#39;t think you understand. I think your phone lines are unmanned. I punched every touch tone I was told, but I&#39;ve still spent 18 hours on hold. It&#39;s not enough your software crashed my Mac, and it constantly hangs and bombs ‚Äî it erased my ROMs! Now the Mac makes the sounds of silence. In my dreams I fantasize of wreaking vengeance on you guys. Say your motorcycle crashes. Blood comes gushing from your gashes. With your fading strength, you call 9-1-1 and you pray for a trained MD. But you get me.(Laughter)And you listen to the sounds of silence.(Music)(Applause)Thank you.Good evening and welcome to: &quot;Spot the TED Presenter Who Used to Be a Broadway Accompanist.&quot;(Laughte... | [{&#39;id&#39;: 1725, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/b7f415a054cc0a2bfdd90d0ad5a7f64cf060150d_1600x1200.jpg&#39;, &#39;speaker&#39;: &#39;David Pogue&#39;, &#39;title&#39;: &#39;10 top time-saving tech tips&#39;, &#39;duration&#39;: 344, &#39;slug&#39;: &#39;david_pogue_10_top_time_saving_tech_tips&#39;, &#39;viewed_count&#39;: 4843421}, {&#39;id&#39;: 2274, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/608e677e4392bcdcf82b068fa221b9df74a213ef_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Tony Fadell&#39;, &#39;title&#39;: &#39;The first secret of design is ... noticing&#39;, &#39;duration&#39;: 1001, &#39;slug&#39;: &#39;tony_fadell_the_first_secret_of_design_is_noticing&#39;, &#39;viewed_count&#39;: 2005916}, {&#39;id&#39;: 172, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/b790be2f87ceffba73fe73837944400c7d61cba2_1600x1200.jpg&#39;, &#39;speaker&#39;: &#39;John Maeda&#39;, &#39;title&#39;: &#39;Designing for simplicity&#39;, &#39;duration&#39;: 959, &#39;slug&#39;: &#39;john_maeda_on_the_simple_life&#39;, &#39;viewed_count&#39;: 1215942}, {&#39;id&#39;: 2664, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/092f184f6625c2aeef10949c8d7b2aa14ba4132b_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Dan Bricklin&#39;, &#39;title&#39;: &#39;Meet the invento... | 0.000441 | . 3 | Greening the ghetto | https://www.ted.com/talks/majora_carter_s_tale_of_urban_renewal n | If you&#39;re here today ‚Äî and I&#39;m very happy that you are ‚Äî you&#39;ve all heard about how sustainable development will save us from ourselves. However, when we&#39;re not at TED, we are often told that a real sustainability policy agenda is just not feasible, especially in large urban areas like New York City. And that&#39;s because most people with decision-making powers, in both the public and the private sector, really don&#39;t feel as though they&#39;re in danger.The reason why I&#39;m here today, in part, is because of a dog ‚Äî an abandoned puppy I found back in the rain, back in 1998. She turned out to be a much bigger dog than I&#39;d anticipated. When she came into my life, we were fighting against a huge waste facility planned for the East River waterfront despite the fact that our small part of New York City already handled more than 40 percent of the entire city&#39;s commercial waste: a sewage treatment pelletizing plant, a sewage sludge plant, four power plants, the world&#39;s largest food-distribution ce... | [{&#39;id&#39;: 1041, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/96c703bb13a2e9c2d351a5e6b52390bc35eaad06_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Majora Carter&#39;, &#39;title&#39;: &#39;3 stories of local eco-entrepreneurship&#39;, &#39;duration&#39;: 1079, &#39;slug&#39;: &#39;majora_carter_3_stories_of_local_ecoactivism&#39;, &#39;viewed_count&#39;: 702642}, {&#39;id&#39;: 1892, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/f5ebbf91eb093a2da2cfe1941724a3e55d222713_1600x1200.jpg&#39;, &#39;speaker&#39;: &#39;Toni Griffin&#39;, &#39;title&#39;: &#39;A new vision for rebuilding Detroit&#39;, &#39;duration&#39;: 708, &#39;slug&#39;: &#39;toni_griffin_a_new_vision_for_rebuilding_detroit&#39;, &#39;viewed_count&#39;: 826727}, {&#39;id&#39;: 2078, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/92ddb109a1f98a3745fe1b2b0d2c5519ab3931dc_2400x1800.jpg&#39;, &#39;speaker&#39;: &#39;Dan Barasch&#39;, &#39;title&#39;: &#39;A park underneath the hustle and bustle of New York City&#39;, &#39;duration&#39;: 377, &#39;slug&#39;: &#39;dan_barasch_a_park_underneath_the_hustle_and_bustle_of_new_york_city&#39;, &#39;viewed_count&#39;: 862197}, {&#39;id&#39;: 2873, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/635f76d5d4d0a454b6131b93b471d1f65... | 0.001574 | . 4 | The best stats you&#39;ve ever seen | https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen n | About 10 years ago, I took on the task to teach global development to Swedish undergraduate students. That was after having spent about 20 years together with African institutions studying hunger in Africa, so I was sort of expected to know a little about the world. And I started in our medical university, Karolinska Institute, an undergraduate course called Global Health. But when you get that opportunity, you get a little nervous. I thought, these students coming to us actually have the highest grade you can get in Swedish college systems ‚Äî so I thought, maybe they know everything I&#39;m going to teach them about. So I did a pre-test when they came. And one of the questions from which I learned a lot was this one: &quot;Which country has the highest child mortality of these five pairs?&quot;I put them together, so that in each pair of country, one has twice the child mortality of the other. And this means that it&#39;s much bigger a difference than the uncertainty of the data. I won&#39;t put you at ... | [{&#39;id&#39;: 2056, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/afc9b259845ec1b543419871e10753d4d9044fda_2400x1800.jpg&#39;, &#39;speaker&#39;: &#39;Talithia Williams&#39;, &#39;title&#39;: &quot;Own your body&#39;s data&quot;, &#39;duration&#39;: 1023, &#39;slug&#39;: &#39;talithia_williams_own_your_body_s_data&#39;, &#39;viewed_count&#39;: 1345319}, {&#39;id&#39;: 2296, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/9e003b0a822daba702608136e73f7be001b6b2f2_2880x1620.jpg&#39;, &#39;speaker&#39;: &#39;Manuel Lima&#39;, &#39;title&#39;: &#39;A visual history of human knowledge&#39;, &#39;duration&#39;: 769, &#39;slug&#39;: &#39;manuel_lima_a_visual_history_of_human_knowledge&#39;, &#39;viewed_count&#39;: 1710818}, {&#39;id&#39;: 620, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/111517_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Hans Rosling&#39;, &#39;title&#39;: &#39;Let my dataset change your mindset&#39;, &#39;duration&#39;: 1196, &#39;slug&#39;: &#39;hans_rosling_at_state&#39;, &#39;viewed_count&#39;: 1471015}, {&#39;id&#39;: 974, &#39;hero&#39;: &#39;https://pe.tedcdn.com/images/ted/205077_800x600.jpg&#39;, &#39;speaker&#39;: &#39;Hans Rosling&#39;, &#39;title&#39;: &quot;The good news of the decade? We&#39;re winning the war against child mortality&quot;, &#39;duration&#39;: 934, &#39;slu... | 0.001933 | . Graph visualization using Gephi (https://gephi.org/) . Gephi is a free software which provides GUI type interface to do network analytics and produce network metrics such as eigenvector and pagerank metrics. | Following is a visual representation of our network graph with different colors representing different clusters or communities within graph. TED talks with similar themes or topic will tend to be in one cluster | . For example, following is the graph of the biggest community in the above network representing talks related to technology and innovation . Calculate TF-IDF value of terms in ted talk transcripts . We use Sklearn&#39;s (an ML library in Python) TfidfVectorizer | It is important that stop words (&#39;and&#39;, &#39;the&#39; etc) are not counted therefore we pass parameter &#39;english&#39; to remove english stop words. | . #collapse-show tfidf_vector = TfidfVectorizer(stop_words=&#39;english&#39;) tfidf_values = tfidf_vector.fit_transform(final_ted_df[&#39;transcript&#39;]) tfidf_matrix = tfidf_values.toarray() # some of the identified features/terms from transcripts print(&quot;TFIDF vectorizer has identified {} unique tokens in all the transcripts data.&quot;.format(tfidf_matrix.shape[1])) print(&quot;Following are some of the identified tokens:&quot;) print(tfidf_vector.get_feature_names()[5000:5025]) . . TFIDF vectorizer has identified 58489 unique tokens in all the transcripts data. Following are some of the identified tokens: [&#39;baldness&#39;, &#39;baldwin&#39;, &#39;baldy&#39;, &#39;bale&#39;, &#39;baleen&#39;, &#39;baleful&#39;, &#39;balenciaga&#39;, &#39;balers&#39;, &#39;bales&#39;, &#39;balfour&#39;, &#39;bali&#39;, &#39;balikpapan&#39;, &#39;balinese&#39;, &#39;balk&#39;, &#39;balkan&#39;, &#39;balkans&#39;, &#39;balked&#39;, &#39;balkh&#39;, &#39;balkhi&#39;, &#39;ball&#39;, &#39;ballads&#39;, &#39;ballah&#39;, &#39;ballard&#39;, &#39;ballast&#39;, &#39;ballasted&#39;] . Search query . search_query = &quot;inspiration and courage&quot; . Create matching score based on search query terms . Matching score of a ted talk - it is the sum of all TF-IDF values for terms in search query | . #collapse-show search_tokens = search_query.split(&quot; &quot;) # Find the index of all search tokens in feature names obtained from TFIDF vectorizer. feature_names = tfidf_vector.get_feature_names() token_indexes = list() for token in search_tokens: if token in feature_names: index = feature_names.index(token) token_indexes.append(index) if len(token_indexes) == 0: # No search term found in the feature names. Return no results. print(&quot;No keywords in our data match with the query&quot;) else: matching_scores = np.zeros(2467) for index in token_indexes: matching_scores = np.add(matching_scores, tfidf_matrix[:,index]) search_dataframe = final_ted_df[[&#39;title&#39;,&#39;url&#39;, &#39;eigenvector_value&#39;]] search_dataframe = search_dataframe.assign(matching_scores=matching_scores) print(&quot;Notice the matching_scores column for the above specified search query:&quot;) search_dataframe.head(5) . . Notice the matching_scores column for the above specified search query: . title url eigenvector_value matching_scores . 0 | Do schools kill creativity? | https://www.ted.com/talks/ken_robinson_says_schools_kill_creativity n | 0.003404 | 0.000000 | . 1 | Averting the climate crisis | https://www.ted.com/talks/al_gore_on_averting_climate_crisis n | 0.001041 | 0.000000 | . 2 | Simplicity sells | https://www.ted.com/talks/david_pogue_says_simplicity_sells n | 0.000441 | 0.000000 | . 3 | Greening the ghetto | https://www.ted.com/talks/majora_carter_s_tale_of_urban_renewal n | 0.001574 | 0.017196 | . 4 | The best stats you&#39;ve ever seen | https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen n | 0.001933 | 0.000000 | . Total Score : Combine Eigen-vector and Matching score values to create a composite score . We give equal weightage to eigenvector value and matching score and calculate a composite score for each ted talk and sort to get top 5 search results | . #collapse-show search_dataframe[&#39;total_score&#39;] = 0.5 * search_dataframe[&#39;matching_scores&#39;] + 0.5 * search_dataframe[&#39;eigenvector_value&#39;] print(&quot;We have calculated a composite total score for each ted talk. Notice the total_Score column:&quot;) search_dataframe.head(5) . . We have calculated a composite total score for each ted talk. Notice the total_Score column: . title url eigenvector_value matching_scores total_score . 0 | Do schools kill creativity? | https://www.ted.com/talks/ken_robinson_says_schools_kill_creativity n | 0.003404 | 0.000000 | 0.001702 | . 1 | Averting the climate crisis | https://www.ted.com/talks/al_gore_on_averting_climate_crisis n | 0.001041 | 0.000000 | 0.000521 | . 2 | Simplicity sells | https://www.ted.com/talks/david_pogue_says_simplicity_sells n | 0.000441 | 0.000000 | 0.000220 | . 3 | Greening the ghetto | https://www.ted.com/talks/majora_carter_s_tale_of_urban_renewal n | 0.001574 | 0.017196 | 0.009385 | . 4 | The best stats you&#39;ve ever seen | https://www.ted.com/talks/hans_rosling_shows_the_best_stats_you_ve_ever_seen n | 0.001933 | 0.000000 | 0.000966 | . Search results (top 5) . Search results are &quot;Courage is contagious&quot;, &quot;Its time for women to run for office&quot; etc and appear quite relevant to our search query - &#39;inspiration and courage&#39; | If we check the transcript of these talks they have lot of words like inspiration, courage or both leading to high TF-IDF values | Also, these talks are more recommended in other important talks and therefore have high eigenvector values. | . #collapse-show # Show the top 5 search results search_dataframe.sort_values([&#39;total_score&#39;], ascending=[False], inplace = True) print(&quot;Following are the top 5 search results:&quot;) search_dataframe.head(5)[[&#39;title&#39;,&#39;url&#39;]] . . Following are the top 5 search results: . title url . 2426 | Courage is contagious | https://www.ted.com/talks/damon_davis_what_i_saw_at_the_ferguson_protests n | . 1681 | I&#39;m not your inspiration, thank you very much | https://www.ted.com/talks/stella_young_i_m_not_your_inspiration_thank_you_very_much n | . 2239 | It&#39;s time for women to run for office | https://www.ted.com/talks/halla_tomasdottir_it_s_time_for_women_to_run_for_office n | . 2196 | A new way to heal hearts without surgery | https://www.ted.com/talks/franz_freudenthal_a_new_way_to_heal_hearts_without_surgery n | . 800 | The power of vulnerability | https://www.ted.com/talks/brene_brown_on_vulnerability n | . Shortcomings . Matching score metric doesn&#39;t work well with long search queries. Need to look into cosine similarity metric. | Using eigenvector metric instead of pagerank | No contextual understanding of the query. | . This is the roadmap of future changes. If you have any suggestions do reach out to me. . Yay!!üòÉ üòÉ : We have implemented a basic search engine from scratch. Sometimes in PM interviews we are asked how search engines or how Google search works. This post should be enough to nail the question.ü§óü§ó Feel free to play around with the code by opening in Colab or cloning the repo in github If you have any comments or suggestions please comment below or reach out to me at - https://twitter.com/kn_neeraj or on LinkedIn .",
            "url": "https://kn-neeraj.github.io/analyticsblog/python/search%20engine/sklearn/tfidf/network%20analytics/2020/04/07/vertical-search.html",
            "relUrl": "/python/search%20engine/sklearn/tfidf/network%20analytics/2020/04/07/vertical-search.html",
            "date": " ‚Ä¢ Apr 7, 2020"
        }
        
    
  

  
  

  
      ,"page1": {
          "title": "About Me",
          "content": "Hi there! I am Neeraj. I have just completed my grad school from Indian School of Business and will start working as a Product Manager. This website shares my personal projects in analytics. . . If you want to chat about Tech, Products, or Analytics feel free to reach out to me on Twitter or Linkedin .",
          "url": "https://kn-neeraj.github.io/analyticsblog/about/",
          "relUrl": "/about/",
          "date": ""
      }
      
  

  

  
  

  

  
  

  

  
  

  
  

}